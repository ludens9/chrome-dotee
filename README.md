# Dooteee Chrome Extension

프리랜서를 위한 근무시간 기록 크롬 확장프로그램

## 주요 기능

1. **근무 시간 기록**
   - 실시간 근무 시간 추적
   - 일간/주간/월간 통계
   - **자동 종료 타이머:** 설정된 시간이 되면 자동으로 근무를 종료합니다. 팝업 UI에서 자동 종료 시간을 설정할 수 있습니다.
   - 자정 자동 기록 전환

## 시간 계산 규칙

1. **일일 근무시간 (총누적시간)**
   - 자정(00:00)을 기준으로 날짜 변경
   - 자정이 되면 새로운 날짜의 근무 시간으로 자동 전환
   - 예시:
     ```
     1월 21일 23:00 근무 시작
     → 21일 근무: 23:00~00:00 (1시간)
     → 22일 근무: 00:00~11:58 (11.8시간)
     ```

2. **세션 관리**
   - 자정 시점에 현재 세션 자동 분할 (`background/background.js`의 `handleMidnightReset` 함수에서 처리)
   - 이전 날짜 세션은 workRecords에 저장
   - 새로운 날짜는 00:00부터 새로운 세션으로 시작
   - 각 날짜별 독립적인 근무 시간 기록

3. **이메일 리포트**
   - 전날의 근무 기록만 포함
   - 자정을 기준으로 분할된 시간 반영
   - 정확한 일간/주간/월간 통계 제공

## 일일 리포트

1. **일일 리포트**
   - 매일 설정된 시간에 이메일 발송
   - 전일 근무 시간 통계
   - 주간/월간 비교 데이터
   - 맞춤형 메시지

3. **오프라인 지원**
   - 오프라인 상태에서도 근무 시간 기록 가능
   - 네트워크가 다시 연결되면 오프라인 동안 큐에 저장된 이메일 발송 등의 작업 자동 동기화 (`js/queue.js`, `js/network.js`에서 처리)

## 시스템 구조

### 1. Background Service (background.js)
- 타이머 관리 및 상태 추적
- 알람 처리 (자동 종료, 자정 변경, 이메일 발송)
- 아이콘 애니메이션 관리

### 2. Storage System
- **StorageManager (storage.js)**
  - 작업 기록 저장/조회
  - 설정 관리
  - 통계 데이터 계산

- **QueueManager (queue.js)**
  - 오프라인 작업 큐 관리
  - 네트워크 복구 시 동기화

### 3. UI Components
- **PopupManager (popup.js)**
  - 메인 UI 관리, 실시간 상태 표시, 설정 인터페이스, 사용자 입력 처리

### 4. Network & Email
- **EmailService (email.js)**
  - 일일 리포트 발송
  - 이메일 템플릿 관리

## 파일 구조
